sap.ui.define(["com/eramet/Convergence_Achat_Magasin/controller/BaseController","com/eramet/Convergence_Achat_Magasin/util/constans","com/eramet/Convergence_Achat_Magasin/util/formatter"],function(e,t,i){"use strict";return e.extend("com.eramet.Convergence_Achat_Magasin.controller.ListeServir.ListeServir",{onInit:function(){this.getRouter().attachRoutePatternMatched(this._onRouteMatched,this)},_onRouteMatched:function(e){if(e.getParameter("name")==="ListeServir"){this.registerNavFrom(this);this._resetModel();var t=this.getView().getModel("i18n").getResourceBundle().getText("listeServirTitle");this.getView().byId("title").setText(t+" ("+this.getView().getModel("listServirModel").getData().length+")")}},backToHome:function(){this.getRouter().navTo("Home")},_resetModel:function(){this.listServirModel(t.aListServir)},onPressNavToList:function(e){var i=e.getSource().oBindingContexts.listServirModel.sPath;i=i.split("/")[1];if(i.indexOf("/")>-1){i=i.split("/")[0]}t.aList=this.getView().byId("serviceList").getModel("listServirModel").getData()[i];this.getRouter().navTo("Liste")},onSuggest:function(e){var t=e.getParameter("suggestValue"),i=[];if(t){i.push(new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("DeliveryDocument",sap.ui.model.FilterOperator.Contains,t)],and:false}))}this.getView().byId("servirSearch").getBinding("suggestionItems").filter(i);this.getView().byId("servirSearch").suggest()},onSearch:function(e){t.aDoc=[];var i=e.getParameter("suggestionItem"),r=this.getView();console.log(e.mProperties);console.log(e.getSource());if(i===undefined){console.log("empty search bar");console.log("searchbar value",this.getView().byId("servirSearch").getValue());if(this.getView().byId("servirSearch").getValue()!=""){r.byId("serviceList").getBinding("items").filter(new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("DeliveryDocument",sap.ui.model.FilterOperator.EQ,this.getView().byId("servirSearch").getValue())],and:false}))}else{r.byId("serviceList").getBinding("items").filter("")}}else{r.byId("serviceList").getBinding("items").filter(new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("DeliveryDocument",sap.ui.model.FilterOperator.EQ,i.getProperty("text"))],and:false}))}}})});