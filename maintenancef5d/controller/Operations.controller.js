sap.ui.define(["com/eramet/maintenanceF5D/controller/BaseController","com/eramet/maintenanceF5D/util/util","com/eramet/maintenanceF5D/util/formatter"],function(e,o,t){return e.extend("com.eramet.depanneur.HATDepanneurApp.controller.Operations",{aChangedButtons:[],onInit:function(){this.getRouter().attachRoutePatternMatched(this._onRouteMatched,this)},_onRouteMatched:function(e){if(e.getParameter("name")==="Operations"){var t=this.getView().getModel("i18n").getResourceBundle().getText("operationsTitle");this.getView().byId("otNumber").setText(o.oSelectedOT);this.getView().byId("desc").setText(o.oSelectedOTFull.description);this.getView().byId("date").setText(o.oSelectedOTFull.date);this.getView().byId("operations").setTitle(t);this._resetModel()}},_resetModel:function(){var e=[{operation:"N° operation 0001",description:"Description 1",visibleSub:false,counter:"15/20",src:"sap-icon://synchronize",nodes:[{operationSub:"Sous-opération 1",description:"",visibleSub:true,visibleCount:false,subSrc:"sap-icon://synchronize"},{operationSub:"Sous-opération 2",description:"",visibleSub:true,visibleCount:false,subSrc:"sap-icon://synchronize"},{operationSub:"Sous-opération 3",description:"",visibleSub:true,visibleCount:false,subSrc:"sap-icon://synchronize"},{operationSub:"Sous-opération 4",description:"",visibleSub:true,visibleCount:false,subSrc:"sap-icon://synchronize"}]},{operation:"N° operation 0002",description:"Description 2",visibleSub:false,counter:"8/17",src:"sap-icon://synchronize",nodes:[{operationSub:"Sous-opération 1",description:"",visibleSub:true,visibleCount:false,subSrc:"sap-icon://synchronize"},{operationSub:"Sous-opération 2",description:"",visibleSub:true,visibleCount:false,subSrc:"sap-icon://synchronize"}]},{operation:"N° operation 0003",description:"Description 3",visibleSub:false,counter:"3/10",src:"sap-icon://accept",nodes:[{operationSub:"Sous-opération 1",description:"",visibleSub:true,visibleCount:false,subSrc:"sap-icon://synchronize"}]},{operation:"N° operation 0004",description:"Description 4",visibleSub:false,counter:"2/14",src:"sap-icon://accept",nodes:[{operationSub:"Sous-opération 1",description:"",visibleSub:true,visibleCount:false,subSrc:"sap-icon://synchronize"}]},{operation:"N° operation 0005",description:"Description 5",visibleSub:false,counter:"6/20",src:"sap-icon://synchronize",nodes:[{operationSub:"Sous-opération 1",description:"",visibleSub:true,visibleCount:false,subSrc:"sap-icon://synchronize"},{operationSub:"Sous-opération 2",description:"",visibleSub:true,visibleCount:false,subSrc:"sap-icon://synchronize"},{operationSub:"Sous-opération 3",description:"",visibleSub:true,visibleCount:false,subSrc:"sap-icon://synchronize"},{operationSub:"Sous-opération 4",description:"",visibleSub:true,visibleCount:false,subSrc:"sap-icon://synchronize"}]}];o.aTreeElements=e;this.treeModel(e);this._resetIcons()},backToHome:function(){this._resetModel();this.getRouter().navTo("Home")},backToWorkPage:function(){this._resetModel();this.getRouter().navTo("WorkPage")},backToFollowup:function(){this._resetModel();this.getRouter().navTo("Followup")},onPressNavToOTDetail:function(){this._resetModel();this.getRouter().navTo("OTDetail")},onPressNavToOpDetail:function(e){var t=e.getSource().oBindingContexts.treeModel.sPath;t=t.split("/")[1];if(t.indexOf("/")>-1){t=t.split("/")[0]}o.sOperationName=this.getView().byId("Tree").getModel("treeModel").getData()[t];this.getRouter().navTo("ToOpDetail")},onPressChangeIcon:function(e){var o=sap.ui.getCore().byId(e.getSource().sId).getIcon();if(o==="sap-icon://synchronize"){sap.ui.getCore().byId(e.getSource().sId).setIcon("sap-icon://accept");sap.ui.getCore().byId(e.getSource().sId).setType("Accept");this.aChangedButtons.push(e.getSource().sId)}else{sap.ui.getCore().byId(e.getSource().sId).setIcon("sap-icon://synchronize");sap.ui.getCore().byId(e.getSource().sId).setType("Default");var t=this.aChangedButtons;var i=e.getSource().sId;for(var s=t.length-1;s>=0;s--){if(t[s]===i){t.splice(s,1);break}}}},_resetIcons:function(){for(var e=0;e<this.aChangedButtons.length;e++){if(sap.ui.getCore().byId(this.aChangedButtons[e])){sap.ui.getCore().byId(this.aChangedButtons[e]).setType("Default")}}this.aChangedButtons=[]}})});